(this["webpackJsonpwerewolf-app"]=this["webpackJsonpwerewolf-app"]||[]).push([[0],{6:function(e,t){e.exports={COMMUNITY_CHAT:"COMMUNITY_CHAT",USER_CONNECTED:"USER_CONNECTED",MESSAGE_RECEIVED:"MESSAGE_RECEIVED",MESSAGE_SENT:"MESSAGE_SENT",USER_DISCONNECTED:"USER_DISCONNECTED",TYPING:"TYPING",VERIFY_USER:"VERIFY_USER",LOGOUT:"LOGOUT"}},75:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),i=n(37),c=n.n(i),r=n(2),o=n(3),u=n(5),l=n(4),p=n(38),h=n.n(p),d=n(6),m=n(0),j=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).setUser=function(e){var t=e.user,n=e.isUser;console.log(t,n),n?s.setError("User name taken"):s.props.setUser(t)},s.handleSubmit=function(e){e.preventDefault();var t=s.props.socket,n=s.state.nickname;t.emit(d.VERIFY_USER,n,s.setUser)},s.handleChange=function(e){s.setState({nickname:e.target.value})},s.setError=function(e){s.setState({error:e})},s.state={nickname:"",error:""},s}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.nickname,s=t.error;return Object(m.jsx)("div",{className:"login",children:Object(m.jsxs)("form",{onSubmit:this.handleSubmit,className:"login-form",children:[Object(m.jsx)("label",{htmlFor:"nickname",children:Object(m.jsx)("h2",{children:"Got a nickname?"})}),Object(m.jsx)("input",{ref:function(t){e.textInput=t},type:"text",id:"nickname",value:n,onChange:this.handleChange,placeholder:"MYCoolUsername"}),Object(m.jsx)("div",{className:"error",children:s||null})]})})}}]),n}(s.Component),g=n(14),f=function(e){var t=e.name;return Object(m.jsx)("div",{className:"chat-header",children:Object(m.jsx)("div",{className:"user-info",children:Object(m.jsx)("div",{className:"user-name",children:t})})})},b=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),s.sendMessage(),s.setState({message:""})},s.sendMessage=function(){s.props.sendMessage(s.state.message)},s.sendTyping=function(){s.lastUpdateTime=Date.now(),s.state.isTyping||(s.setState({isTyping:!0}),s.props.sendTyping(!0),s.startCheckingTyping())},s.startCheckingTyping=function(){console.log("Typing"),s.typingInterval=setInterval((function(){Date.now()-s.lastUpdateTime>300&&(s.setState({isTyping:!1}),s.stopCheckingTyping())}),300)},s.stopCheckingTyping=function(){console.log("Stop Typing"),s.typingInterval&&(clearInterval(s.typingInterval),s.props.sendTyping(!1))},s.state={message:"",isTyping:!1},s}return Object(o.a)(n,[{key:"componentWillUnmount",value:function(){this.stopCheckingTyping()}},{key:"render",value:function(){var e=this,t=this.state.message;return Object(m.jsx)("div",{className:"message-input",children:Object(m.jsxs)("form",{onSubmit:this.handleSubmit,className:"message-form",children:[Object(m.jsx)("input",{id:"message",ref:"messageinput",type:"text",className:"form-control",value:t,autoComplete:"off",placeholder:"Type something interesting",onKeyUp:function(t){13!==t.keyCode&&e.sendTyping()},onChange:function(t){var n=t.target;e.setState({message:n.value})}}),Object(m.jsx)("button",{disabled:t.length<1,type:"submit",className:"send",children:" Send "})]})})}}]),n}(s.Component),O=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).scrollDown=s.scrollDown.bind(Object(g.a)(s)),s}return Object(o.a)(n,[{key:"scrollDown",value:function(){var e=this.refs.container;e.scrollTop=e.scrollHeight}},{key:"componentDidMount",value:function(){this.scrollDown()}},{key:"componentDidUpdate",value:function(e,t){this.scrollDown()}},{key:"render",value:function(){var e=this.props,t=e.messages,n=e.user,s=e.typingUsers;return console.log("mess"+t),Object(m.jsx)("div",{ref:"container",className:"thread-container",children:Object(m.jsxs)("div",{className:"thread",children:[t.map((function(e){return Object(m.jsxs)("div",{className:"message-container ".concat(e.sender===n.name&&"right"),children:[Object(m.jsx)("div",{className:"time",children:e.time}),Object(m.jsxs)("div",{className:"data",children:[Object(m.jsx)("div",{className:"message",children:e.message}),Object(m.jsx)("div",{className:"name",children:e.sender})]})]},e.id)})),s.map((function(e){return Object(m.jsx)("div",{className:"typing-user",children:"".concat(e," is typing . . .")},e)}))]})})}}]),n}(s.Component),v=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).initChat=function(e){var t=s.props.socket;s.setState({chat:e}),t.on(d.MESSAGE_RECEIVED,s.addMessageToChat()),t.on(d.TYPING,s.updateTypingInChat())},s.addMessageToChat=function(){return function(e){var t=s.state.chat.messages.push(e);s.setState({newChat:t})}},s.updateTypingInChat=function(){return function(e){var t=e.user,n=e.isTyping;if(t!==s.props.user.name){var a=s.state.chat,i=a;n&&!a.typingUsers.includes(t)?i=a.typingUsers.push(t):!n&&a.typingUsers.includes(t)&&(i=a.typingUsers=a.typingUsers.filter((function(e){return e!==t}))),s.setState({newChat:i}),console.log(i)}}},s.sendMessage=function(e){s.props.socket.emit(d.MESSAGE_SENT,{message:e})},s.sendTyping=function(e){s.props.socket.emit(d.TYPING,{isTyping:e})},s.state={chat:{messages:[],user:"",typingUsers:[]}},s.initChat=s.initChat.bind(Object(g.a)(s)),s}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.socket.emit(d.COMMUNITY_CHAT,this.initChat)}},{key:"render",value:function(){var e=this,t=this.props.user,n=this.state.chat;return console.log(n),Object(m.jsx)("div",{className:"container",children:Object(m.jsx)("div",{className:"chat-room-container",children:Object(m.jsxs)("div",{className:"chat-room",children:[Object(m.jsx)(f,{name:"Werewolf Chat"}),Object(m.jsx)(O,{messages:n.messages,user:t,typingUsers:n.typingUsers}),Object(m.jsx)(b,{sendMessage:function(t){e.sendMessage(t)},sendTyping:function(t){e.sendTyping(t)}})]})})})}}]),n}(s.Component),y=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.socket,n=e.user;return Object(m.jsx)("div",{className:"container",children:Object(m.jsx)(v,{socket:t,user:n})})}}]),n}(s.Component),C=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).initSocket=function(){var e=h()("/");e.on("connect",(function(){s.state.user?s.reconnect(e):console.log("Connected"),console.log("Connected")})),s.setState({socket:e})},s.reconnect=function(e){e.emit(d.VERIFY_USER,s.state.user.name,(function(e){var t=e.isUser,n=e.user;t?s.setState({user:null}):s.setUser(n)}))},s.setUser=function(e){s.state.socket.emit(d.USER_CONNECTED,e),s.setState({user:e})},s.logout=function(){s.state.socket.emit(d.LOGOUT),s.setState({user:null})},s.state={socket:null,user:null},s}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.initSocket()}},{key:"render",value:function(){this.props.title;var e=this.state,t=e.socket,n=e.user;return Object(m.jsx)("div",{className:"container",children:n?Object(m.jsx)(y,{socket:t,user:n,logout:this.logout}):Object(m.jsx)(j,{socket:t,setUser:this.setUser})})}}]),n}(s.Component),S=(n(75),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(m.jsx)(C,{title:"Werewolf"})}}]),n}(s.Component)),T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,77)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),s(e),a(e),i(e),c(e)}))};c.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(S,{})}),document.getElementById("root")),T()}},[[76,1,2]]]);
//# sourceMappingURL=main.ff0f4092.chunk.js.map